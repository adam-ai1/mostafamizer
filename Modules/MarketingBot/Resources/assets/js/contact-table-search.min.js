let contactsDebounceTimer;function searchContacts(e){const t=e?e.value.trim():"";clearTimeout(contactsDebounceTimer),contactsDebounceTimer=setTimeout((()=>{performContactsSearch(t)}),800)}function performContactsSearch(e){if("undefined"==typeof contactRoute)return void console.error("contactRoute is not defined");const t=document.getElementById("contacts-table-container");if(!t)return;const n=document.getElementById("contacts-table-skeleton"),c=t.querySelector(".contacts-table");n&&n.classList.remove("hidden"),c&&c.classList.add("hidden");let o=contactRoute;if(e){const t=o.includes("?")?"&":"?";o+=`${t}search=${encodeURIComponent(e)}`}fetch(o,{headers:{"X-Requested-With":"XMLHttpRequest",Accept:"application/json"}}).then((e=>{if(!e.ok)throw new Error("Network error");return e.json()})).then((e=>{if(n&&n.classList.add("hidden"),t&&e&&e.items){const n=document.createElement("div");n.innerHTML=e.items;const c=n.querySelector(".contacts-table");c?(t.innerHTML="",t.appendChild(c),c.classList.remove("hidden")):t.innerHTML='<div class="text-center py-8 text-red-500">Failed to load contacts table.</div>',initializeContactHandlers()}else n&&n.classList.add("hidden"),c&&c.classList.remove("hidden")})).catch((e=>{console.error("Search error:",e),n&&n.classList.add("hidden"),c?c.classList.remove("hidden"):t&&(t.innerHTML='<div class="text-center py-8 text-red-500">Failed to load contacts. Please try again.</div>')}))}function reloadContactsTable(){const e=document.getElementById("searchContacts");searchContacts(e||null)}function initializeContactHandlers(){}document.addEventListener("DOMContentLoaded",(function(){const e=new URLSearchParams(window.location.search).get("search"),t=document.getElementById("searchContacts");t&&e&&(t.value=e,performContactsSearch(e))}));