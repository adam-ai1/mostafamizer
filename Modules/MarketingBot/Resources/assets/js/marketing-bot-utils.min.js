"use strict";document.addEventListener("DOMContentLoaded",()=>{function toggleInbox(){const inbox=document.getElementById("inbox"),arrow=document.getElementById("inboxArrow");inbox.classList.toggle("hidden"),arrow.classList.toggle("rotate-180")}function toggleMenu(id,btn){const submenu=document.getElementById(id),arrow=document.getElementById("arrow-"+id.split("-")[1]);document.querySelectorAll(".submenu").forEach(el=>{if(el.id!==id){el.classList.add("hidden");const otherArrow=document.getElementById("arrow-"+el.id.split("-")[1]);otherArrow&&otherArrow.classList.remove("rotate-180")}}),document.querySelectorAll(".menu-btn").forEach(el=>{el.classList.remove("bg-white","dark:bg-color-47")}),submenu.classList.contains("hidden")?(submenu.classList.remove("hidden"),arrow.classList.add("rotate-180"),btn.classList.add("bg-white","dark:bg-color-47")):(submenu.classList.add("hidden"),arrow.classList.remove("rotate-180"),btn.classList.remove("bg-white","dark:bg-color-47"))}window.toggleInbox=toggleInbox,window.toggleMenu=toggleMenu;const isRTL="rtl"===document.documentElement.getAttribute("dir"),sidebar=document.getElementById("sidebar");function toggleSidebar(open){const mobileMenuBtn=document.getElementById("mobile-menu-btn"),overlay=document.getElementById("sidebar-overlay");open?(isRTL?(sidebar.classList.remove("translate-x-full"),sidebar.classList.remove("-translate-x-full")):(sidebar.classList.remove("-translate-x-full"),sidebar.classList.remove("translate-x-full")),overlay.classList.remove("hidden"),mobileMenuBtn.classList.add("invisible")):(isRTL?sidebar.classList.add("translate-x-full"):sidebar.classList.add("-translate-x-full"),overlay.classList.add("hidden"),mobileMenuBtn.classList.remove("invisible"))}setTimeout(()=>{sidebar.classList.remove("invisible")},150),isRTL?sidebar.classList.remove("-translate-x-full"):sidebar.classList.remove("translate-x-full"),window.toggleSidebar=toggleSidebar,document.querySelectorAll(".custom-select").forEach(select=>{const btn=select.querySelector(".select-btn"),menu=select.querySelector(".select-menu"),selected=select.querySelector(".selected-option");btn.addEventListener("click",()=>{document.querySelectorAll(".select-menu").forEach(m=>{m!==menu&&m.classList.add("hidden")}),menu.classList.toggle("hidden")}),menu.querySelectorAll("li").forEach(item=>{item.addEventListener("click",()=>{selected.textContent=item.textContent,menu.classList.add("hidden")})})}),document.addEventListener("click",e=>{document.querySelectorAll(".custom-select").forEach(select=>{select.contains(e.target)||select.querySelector(".select-menu").classList.add("hidden")})});const scheduleToggle=document.getElementById("scheduleToggle"),scheduleOptions=document.getElementById("scheduleOptions");scheduleToggle&&scheduleOptions&&scheduleToggle.addEventListener("change",(function(){this.checked?scheduleOptions.classList.remove("hidden"):scheduleOptions.classList.add("hidden")}));const aiReplyToggle=document.getElementById("aiReplyToggle"),aiReplyOptions=document.getElementById("aiReplyOptions");aiReplyToggle&&aiReplyOptions&&aiReplyToggle.addEventListener("change",(function(){this.checked?aiReplyOptions.classList.remove("hidden"):aiReplyOptions.classList.add("hidden")}));const contentTextarea=document.getElementById("contentTextarea")||document.querySelector("textarea"),previewText=document.getElementById("previewText");if(contentTextarea&&previewText){const defaultText="This is what your campaign will look like.",updatePreview=()=>{const text=contentTextarea.value.trim();if(text){const escaped=text.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");previewText.innerHTML=escaped.replace(/\r?\n/g,"<br>")}else previewText.textContent=defaultText};previewText.textContent=defaultText,contentTextarea.addEventListener("input",updatePreview)}const fileInput=document.getElementById("imageUpload"),previewImg=document.getElementById("previewImg"),uploadLabel=document.getElementById("uploadLabel"),deleteImg=document.getElementById("deleteImg"),previewImgSec=document.getElementById("previewImgSection");function closeFn(modal,modalBox){modal.classList.remove("opacity-100"),modalBox.classList.remove("scale-100","opacity-100"),modalBox.classList.add("scale-0","opacity-0"),setTimeout(()=>{modal.classList.add("hidden")},300)}function openModal(btn){const modalId=btn.getAttribute("data-target"),modal=document.getElementById(modalId);if(!modal)return;const modalBox=modal.querySelector(".modalBox");modal.classList.remove("hidden"),setTimeout(()=>{modal.classList.add("opacity-100"),modalBox.classList.remove("scale-0","opacity-0"),modalBox.classList.add("scale-100","opacity-100")},10);const handleOutsideClick=e=>{e.target===modal&&(closeFn(modal,modalBox),modal.removeEventListener("click",handleOutsideClick))};modal.addEventListener("click",handleOutsideClick)}fileInput&&previewImg&&deleteImg&&uploadLabel&&previewImgSec&&(fileInput.addEventListener("change",event=>{const file=event.target.files[0];if(file&&file.type&&file.type.startsWith("image/")){const reader=new FileReader;reader.onload=e=>{previewImgSec.src=e.target.result,previewImgSec.classList.remove("hidden"),previewImg.src=e.target.result,previewImg.classList.remove("hidden"),deleteImg.classList.remove("hidden"),uploadLabel.classList.add("hidden")},reader.readAsDataURL(file)}}),deleteImg.addEventListener("click",()=>{previewImgSec.src="",previewImgSec.classList.add("hidden"),previewImg.src="",previewImg.classList.add("hidden"),deleteImg.classList.add("hidden"),uploadLabel.classList.remove("hidden"),fileInput.value=""})),document.addEventListener("click",(function(event){const target=event.target;if(!target)return;const openBtn=target.closest(".openModalBtn");if(openBtn)return event.preventDefault(),event.stopPropagation(),void openModal(openBtn);const closeBtn=target.closest(".closeModalBtn");if(closeBtn){event.preventDefault(),event.stopPropagation();const modal=closeBtn.closest(".sweet-modal");if(modal){const modalBox=modal.querySelector(".modalBox");closeFn(modal,modalBox)}}else;}));let chatDrawerInitialized=!1;function openChatDrawer(){const chatDrawer=document.getElementById("chatDrawer"),chatDrawerOverlay=document.getElementById("chatDrawerOverlay");chatDrawer&&chatDrawer.classList.remove("translate-x-full"),chatDrawerOverlay&&chatDrawerOverlay.classList.remove("hidden")}function closeChatDrawer(){const chatDrawer=document.getElementById("chatDrawer"),chatDrawerOverlay=document.getElementById("chatDrawerOverlay");chatDrawer&&chatDrawer.classList.add("translate-x-full"),chatDrawerOverlay&&chatDrawerOverlay.classList.add("hidden")}function initializeChatDrawer(){chatDrawerInitialized||(chatDrawerInitialized=!0,document.addEventListener("click",(function(event){const target=event.target;if(!target)return;if("chatProfileImg"===target.id)return event.preventDefault(),event.stopPropagation(),void openChatDrawer();const profileImg=target.closest("#chatProfileImg");if(profileImg)return event.preventDefault(),event.stopPropagation(),void openChatDrawer();if("closeChatDrawer"===target.id)return event.preventDefault(),event.stopPropagation(),void closeChatDrawer();const closeBtn=target.closest("#closeChatDrawer");return closeBtn?(event.preventDefault(),event.stopPropagation(),void closeChatDrawer()):"chatDrawerOverlay"===target.id?(event.preventDefault(),event.stopPropagation(),void closeChatDrawer()):void 0})))}initializeChatDrawer(),window.openChatDrawer=openChatDrawer,window.closeChatDrawer=closeChatDrawer,window.initializeChatDrawer=initializeChatDrawer}),$(".voice-type-dropdown").on("click",(function(event){event.stopPropagation();const $dropdownContent=$(this).closest(".relative").find(".voice-dropdown-content");$dropdownContent.slideToggle(200),$(".voice-dropdown-content").not($dropdownContent).slideUp(200),$(".dropdown-menu").addClass("!hidden")})),$(document).on("click",(function(event){$(event.target).closest(".voice-type-dropdown").length||($(".voice-dropdown-content").slideUp(200),$(".dropdown-menu").removeClass("!hidden"))}));const modalStates=new Map;let initialized=!1;const modalUtils={openModal:function(modalId){const modal=document.getElementById(modalId);if(modal){modalStates.has(modalId)&&clearTimeout(modalStates.get(modalId)),modal.classList.remove("hidden");const timeoutId=setTimeout(()=>{modal.classList.add("opacity-100");const modalBox=modal.querySelector(".modalBox");modalBox&&modalBox.classList.add("opacity-100","scale-100"),modalStates.delete(modalId)},50);modalStates.set(modalId,timeoutId)}},closeModal:function(modalId){const modal=document.getElementById(modalId);if(modal){modalStates.has(modalId)&&clearTimeout(modalStates.get(modalId)),modal.classList.remove("opacity-100");const modalBox=modal.querySelector(".modalBox");modalBox&&modalBox.classList.remove("opacity-100","scale-100");const timeoutId=setTimeout(()=>{modal.classList.add("hidden"),modalStates.delete(modalId)},300);modalStates.set(modalId,timeoutId)}},init:function(){initialized||(initialized=!0,document.addEventListener("click",e=>{const button=e.target.closest(".openModalBtn");if(button){e.preventDefault();const modalId=button.getAttribute("data-target");modalId&&this.openModal(modalId)}}),document.addEventListener("click",e=>{const button=e.target.closest(".closeModalBtn");if(button){const modal=button.closest(".sweet-modal");modal&&this.closeModal(modal.id)}}),document.addEventListener("click",e=>{e.target.classList.contains("sweet-modal")&&this.closeModal(e.target.id)}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const visibleModal=document.querySelector(".sweet-modal:not(.hidden)");visibleModal&&this.closeModal(visibleModal.id)}}))}};document.addEventListener("DOMContentLoaded",()=>{modalUtils.init()}),window.modalUtils=modalUtils,window.closeModal=modalUtils.closeModal.bind(modalUtils),window.openModal=modalUtils.openModal.bind(modalUtils);